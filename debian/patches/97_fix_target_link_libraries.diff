--- koffice/libs/main/CMakeLists.txt
+++ koffice/libs/main/CMakeLists.txt
@@ -86,7 +86,7 @@
 
 kde4_add_library(komain SHARED ${komain_LIB_SRCS})
 
-target_link_libraries(komain koodf kstore ${KDE4_KPARTS_LIBS} ${KDE4_KABC_LIBS} ${KDE4_THREADWEAVER_LIBRARIES} ${KDE4_KDE3SUPPORT_LIBS})
+target_link_libraries(komain koodf kstore ${KDE4_KFILE_LIBS} ${KDE4_KPARTS_LIBS} ${KDE4_KABC_LIBS} ${KDE4_THREADWEAVER_LIBRARIES} ${KDE4_KDE3SUPPORT_LIBS})
 
 set_target_properties(komain PROPERTIES VERSION ${GENERIC_KOFFICE_LIB_VERSION} SOVERSION ${GENERIC_KOFFICE_LIB_SOVERSION} )
 install(TARGETS komain DESTINATION ${LIB_INSTALL_DIR} )
--- koffice/libs/pigment/CMakeLists.txt
+++ koffice/libs/pigment/CMakeLists.txt
@@ -73,6 +73,11 @@
 
 target_link_libraries(pigmentcms ${KDE4_KPARTS_LIBS} ${LCMS_LIBRARIES} ${LINK_OPENEXR_LIB} komain ${LINK_OPENCTL_LIB})
 
+if (X11_FOUND)
+  target_link_libraries(pigmentcms ${X11_X11_LIB})
+endif (X11_FOUND)
+
+
 set_target_properties(pigmentcms PROPERTIES VERSION 1.0.0 SOVERSION 1 )
 
 
--- koffice/libs/kokross/CMakeLists.txt
+++ koffice/libs/kokross/CMakeLists.txt
@@ -2,6 +2,6 @@
 set(kokross_LIB_SRCS KoScriptingModule.cpp KoScriptingDocker.cpp KoScriptManager.cpp KoScriptManagerAdd.cpp KoScriptingPart.cpp KoScriptingOdf.cpp)
 kde4_add_library(kokross SHARED ${kokross_LIB_SRCS})
 
-target_link_libraries(kokross ${KDE4_KFILE_LIBS} ${KDE4_KNEWSTUFF2_LIBRARY} ${KDE4_KROSSUI_LIBS} komain)
+target_link_libraries(kokross krosscore ${KDE4_KFILE_LIBS} ${KDE4_KNEWSTUFF2_LIBRARY} ${KDE4_KROSSUI_LIBS} komain)
 set_target_properties(kokross PROPERTIES VERSION ${GENERIC_KOFFICE_LIB_VERSION} SOVERSION ${GENERIC_KOFFICE_LIB_SOVERSION})
 install(TARGETS kokross DESTINATION ${LIB_INSTALL_DIR})
